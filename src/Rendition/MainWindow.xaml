<Window x:Class="Rendition.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Rendition.ViewModels"
        mc:Ignorable="d"
        Title="Rendition"
        Height="520" Width="820"
        MinHeight="400" MinWidth="600"
        Background="{StaticResource PrimaryBrush}"
        WindowStartupLocation="CenterScreen">

    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header: Language selectors + Flavor + Model -->
        <Grid Grid.Row="0" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Target Language -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Target:" Foreground="{StaticResource MutedBrush}"
                           VerticalAlignment="Center" Margin="0,0,8,0" FontSize="14" />
                <ComboBox ItemsSource="{Binding TargetLanguages}"
                          SelectedItem="{Binding SelectedTargetLanguage}"
                          Style="{StaticResource DarkComboBox}"
                          Width="140" />
            </StackPanel>

            <!-- Flavor -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="16,0,0,0">
                <TextBlock Text="Flavor:" Foreground="{StaticResource MutedBrush}"
                           VerticalAlignment="Center" Margin="0,0,8,0" FontSize="14" />
                <ComboBox ItemsSource="{Binding Flavors}"
                          SelectedItem="{Binding SelectedFlavor}"
                          DisplayMemberPath="Name"
                          Style="{StaticResource DarkComboBox}"
                          Width="130" />
            </StackPanel>

            <!-- Flavor description -->
            <TextBlock Grid.Column="2"
                       Text="{Binding SelectedFlavor.Description}"
                       Foreground="{StaticResource MutedBrush}"
                       VerticalAlignment="Center" Margin="12,0,0,0"
                       FontSize="12" FontStyle="Italic" />

            <!-- Load Model button -->
            <Button Grid.Column="4"
                    Command="{Binding LoadModelCommand}"
                    Style="{StaticResource SecondaryButton}"
                    IsEnabled="{Binding IsTranslating, Converter={StaticResource InverseBool}}"
                    VerticalAlignment="Center">
                <Button.Content>
                    <TextBlock>
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Text" Value="Load Model" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsModelLoaded}" Value="True">
                                        <Setter Property="Text" Value="Change Model" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Button.Content>
            </Button>
        </Grid>

        <!-- Translation panels -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="12" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Input panel -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,4">
                    <TextBlock Text="Input" Foreground="{StaticResource MutedBrush}"
                               FontSize="12" FontWeight="SemiBold"
                               VerticalAlignment="Center" />
                    <Button Content="Paste" Command="{Binding PasteInputCommand}"
                            HorizontalAlignment="Right"
                            FontSize="11" Padding="8,3"
                            Style="{StaticResource SecondaryButton}" />
                </Grid>

                <TextBox Grid.Row="1"
                         Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource TranslationTextBox}" />
            </Grid>

            <!-- Output panel -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,4">
                    <TextBlock Text="Output" Foreground="{StaticResource MutedBrush}"
                               FontSize="12" FontWeight="SemiBold"
                               VerticalAlignment="Center" />
                    <Button Content="Copy" Command="{Binding CopyOutputCommand}"
                            HorizontalAlignment="Right"
                            FontSize="11" Padding="8,3"
                            Style="{StaticResource SecondaryButton}" />
                </Grid>

                <TextBox Grid.Row="1"
                         Text="{Binding OutputText, Mode=OneWay}"
                         Style="{StaticResource TranslationTextBox}"
                         IsReadOnly="True" />
            </Grid>
        </Grid>

        <!-- Action buttons -->
        <Grid Grid.Row="2" Margin="0,12,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="Swap"
                    Command="{Binding SwapLanguagesCommand}"
                    Style="{StaticResource SecondaryButton}" />

            <Button Grid.Column="2"
                    Content="Translate"
                    Command="{Binding TranslateCommand}"
                    Style="{StaticResource AccentButton}"
                    MinWidth="120" />
        </Grid>

        <!-- Status bar -->
        <Border Grid.Row="3" Margin="0,8,0,0"
                Background="{StaticResource SurfaceBrush}"
                CornerRadius="4" Padding="12,6">
            <TextBlock Text="{Binding StatusText}"
                       Foreground="{StaticResource MutedBrush}"
                       FontSize="12" />
        </Border>
    </Grid>
</Window>
